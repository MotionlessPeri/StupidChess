# Requirements

## 范围

1. 游戏为中国象棋变体，增加“盲摆 + 职业切换”机制。
2. 首发目标为联网 PvP。
3. 需要为后续 AI 对战与强化学习训练预留接口。

## 已确认规则（产品口径）

1. 摆子阶段为双方盲摆。
2. 每方仅可在“本方初始 16 个起始格集合”内摆子。
3. 无禁摆：任意实际职业可以摆到任意可摆格。
4. 棋子有两种职业：
   - 实际职业：棋子固有类型。
   - 表面职业：由摆放格位模板决定。
5. 对局开始后，未切换棋子按表面职业移动。
6. 某棋子首次吃子后，永久切换为实际职业。
7. 切换后，该棋子的实际职业对双方公开可见。
8. 被吃棋子的实际职业固定公开。
9. 若切换瞬间位置不满足实际职业位置合法性，则该棋子冻结。
10. 冻结棋子可长期冻结直到被吃。
11. 将/帅允许在摆子阶段伪装为任意表面职业。
12. 胜负基础语义沿用象棋（含将军/将死）。

## 已确认裁定（用于解决冲突）

1. 仅当“当前方未被将军且无任何合法着法”时允许 `Pass`。
2. 若当前方被将军，则不能 `Pass`。
3. 双方连续各一次 `Pass` 判和（Double Pass Draw）。
4. 冻结棋子不能移动，且不产生攻击威胁，但仍占格且可被吃。

## 非功能需求

1. 核心规则层使用 `C++20`。
2. 命名遵循 UE 风格。
3. 规则引擎需确定性，可复盘、可回放。
4. 支持跨端一致性校验（Server / UE / MiniApp）。
